## 计算机网络的体系结构
+ 概念：计算机各层及其协议的集合

### 分层必要性
1. 网络协议：进行网络中的数据交换的规则 标准 或约定
组成要素：语法 语义 同步
语法：数据与控制信息的结构或格式
语义：需要发出何种控制信息 完成何种动作以及做出何种响应
同步： 事件实现顺序的详细说明

2. 划分层次概念举例
主机1向主机2通过网络发送文件的工作划分
确信对方已做好接收和存储文件的准备 双方协调好一致的文件格式(Tcp三次握手前身)
+ 文件传送模块
+ 通信服务模块
+ 网络传输模块
文件模块通过通信服务模块 把文件传递给网络传输模块 网络传输模块通过网络接口 通信网络传递给
另一个接收方的 网络传输模块 再依次传回给文件传输模块

3. 分层的优点
+ 各层之间相互独立 灵活性好
+ 结构可分开 易于实现和维护
+ 能促进标准化工作

关键是层数的多少要设计适当 太少会造成协议太复杂 太多造成描述交流困难

### 网络体系分层和传输过程
+ TCP/IP只有四层：
应用层 
+ HTPP SMTP DNS RTP
传输层 
+ TCP UDP
网际层 
+ IP
网络接口层（从上到下） 网络接口层没有具体内容
+ 网络接口
连接路由器 由路由器转发对应的端口 主机B再通过网络接口层接收
所以路由器转发分组最高只到网络层 没有运输层和应用层


+ OSI
应用层
表示层
会话层
传输层
网络层
数据链路层
物理层

+ 五层协议
应用层
传输层
网络层
数据链路层
物理层

+ 5层协议传输数据工程
PS: H5 代表各层首部  header 各层的作用还没描述

主机1
<应用进程数据传送到应用层 加上应用层首部 成为应用层PDU>
应用数据
应用层
<应用层PDU传送到应用层 加成运输层首部 成为运输层报文>
H5 应用数据
传输/运输层
<运输层报文再传送到网络层 加上网络层首部  成为IP数据报/分组>
H4 H5 应用数据
网络层
< IP数据报传送到数据链路层 加上链路层 首部与尾部 成为数据链路层帧 >
H3 H4 H5 应用数据
数据链路层
<数据链路层帧再传送到物理层>
H2 H3 H4 H5  应用程序数据 T2(尾部)
物理层
<物理层把比特流传送到物理媒体>
1010100000 比特流101000
物理传输媒体(网线)
将数据转换成电信号/光信号 传送到 接收端物理层

接收端物理层 再从下层一步步拨去首部传送到上层主机

### 额外概念(协议与服务是否有关系 本层协议由下层服务提供 本层协议控制实体提供上层服务)
+ 实体 任何可发送或接收信息的硬件或软件进程
+ 协议 两个对等实体进行通信的规则的集合
协议复杂 且必须考虑各种非正常情况
在协议的控制下 两个对等实体才能向上一层提供服务
而本层协议实现 需要下层提供服务
协议的水平的 是控制对等实体之间通信的规则
+ 服务 
本层的服务用户只能看见服务而无法看到下面的协议
下面的协议对于上面的服务用户是透明的
服务是垂直的 是由下层向上层通过层间接口提供的

+ 服务访问点SAP 同一系统相连两层的实体进行交互的地方
服务提供者通过协议跟本层的实体进行数据交换
通过SAP与服务用户的实体 也经过协议进行交换

